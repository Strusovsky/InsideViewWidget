var ZOHO={};
ZOHO.embeddedApp=function(){var c=void 0,e=/^https?:\/\/[a-zA-Z0-9-_]*.(csez.zohocorpin.com|zoho.com|sandbox.ucrm.com|zohoplatform.com|zohosandbox.com)(:[0-9]{0,4})?$/,h=void 0,g={};return{events:{},on:function(b,c){this.events[b]||(this.events[b]=[]);this.events[b].push(c)},init:function(){var b,c,d=new Promise(function(d,a){b=d;c=a});this.initPromise={resolve:b,reject:c};return d},isAllowedOrigin:function(b){return e.test(b)?!0:(console.error("Ignoring Message from:"+b+" with Data:"+event.data),!1)},handlePostMessage:function(b){b&&
("WIDGET.CONFIG"===b.type?(c=b.config.WidgetID,h=b.config.TargetOrigin,this.initPromise&&this.initPromise.resolve&&this.initPromise.resolve()):this.handleMsg(b))},handleMsg:function(b){var c=b.Event,d=b.wd;"WIDGET.EVENT"===b.type?(b=ZOHO.embeddedApp.events[c],"object"===typeof b&&b.forEach(function(b){"function"===typeof b&&setTimeout(function(){b(d);console.log(new Date)},0)})):"WIDGET.CALL_BACK"===b.type?(b=b.callBackID,b=g[b],b=b.promise,b(d)):"WIDGET.CALL_BACK.EXCEPTION"===b.type&&(b=b.callBackID,
b=g[b],b=b.reject,b(d))},request:function(b){var f=Math.random().toString(36).substr(2,16);window.parent.postMessage({"MESSAGE.FROM":"EMBEDDED_APP",WidgetID:c,CallBackID:f,Data:b},h);var d,e;b=new Promise(function(a,b){d=a;e=b});g[f]={promise:d,reject:e};return b}}}();window.addEventListener("message",function(c){c&&ZOHO.embeddedApp.isAllowedOrigin(c.origin||c.originalEvent.origin)&&(c=c.data,"object"===typeof c&&"EMBEDDED_APP"===c["MESSAGE.TO"]&&ZOHO.embeddedApp.handlePostMessage(c["MESSAGE.CONTENT"]))});ZOHO.CRM=function(){function c(a){return ZOHO.embeddedApp.request(a)}function e(a,b,d,e){a={category:"CREATE",Entity:a,RelatedID:d,APIData:b};a.type=e||"RECORD";return c(a)}function h(a,b,d){return c({category:"READ",APIData:{Entity:a,RecordID:b,RelatedList:d}})}function g(a,b,d){var e=void 0;if("CONNECTOR"!=d){d=b.url;var g=b.params,e=b.headers;b=b.body;if(!d)throw{Message:"Url missing"};if(g){var f,h=[];for(f in g)h.push(encodeURIComponent(f)+"\x3d"+encodeURIComponent(g[f]));f=h.join("\x26");d+=
(-1<d.indexOf("?")?"\x26":"?")+f}e={url:d,Header:e,Body:b}}else e=b;return c({category:"CONNECTOR",nameSpace:a,data:e})}function b(a){$.extend(a,{category:"UI"});return c(a)}function f(a,b){return c({category:"CONFIG",type:a,nameSpace:b})}function d(a){var b={category:"USER"};a.ID?b.ID=a.ID:a.Type&&(b.Type=a.Type);return c(b)}function k(a){a={category:"META",type:a.type,Entity:a.Entity};return c(a)}return{CONFIG:{getOrgVariable:function(a){return f("VARIABLE",a)},getOrgInfo:function(a){return f("ORG")},
getCurrentUser:function(){return f("CURRENT_USER").then(function(a){return a[0]})}},META:{API:{getFields:function(a){a.type="FIELD_LIST";return k(a)},getModules:function(){return k({type:"MODULE_LIST"})}}},API:{addNotes:function(a){return e(a.Entity,{data:[{Note_Title:a.Title,Note_Content:a.Content}]},a.RecordID,"NOTES")},addNotesAttachment:function(a){return c({category:"UPDATE",type:"NOTES",Entity:a.Entity,RecordID:a.RecordID,RelatedRecordID:a.RelatedRecordID,APIData:{Files:{FileName:File.Name,
FileData:File.Content}}})},insertRecord:function(a){return e(a.Entity,a.APIData)},getRecord:function(a){return h(a.Entity,a.RecordID)},getAllRecords:function(a){return c({category:"READ",APIData:a})},updateRecord:function(a){return c({category:"UPDATE",type:"RECORD",Entity:a.Entity,APIData:a.APIData})},deleteRecord:function(a){return c({category:"DELETE",type:"RECORD",Entity:a.Entity,RecordID:a.RecordID})},searchRecord:function(a){return c({category:"SEARCH",Entity:a.Entity,Type:a.Type,Query:a.Query})},
getAllUsers:function(a){return d({Type:a.Type})},getUser:function(a){return d({ID:a.ID})},getAllUsers:function(a){return d({Type:a.Type})},getRelatedRecords:function(a){return h(a.Entity,a.RecordID,a.RelatedList)},updateRelatedRecords:function(a){return c({category:"UPDATE",type:"RELATED_RECORD",Entity:a.Entity,RecordID:a.RecordID,RelatedList:a.RelatedList,RelatedRecordID:a.RelatedRecordID,APIData:a.APIData})},delinkRelatedRecord:function(a){return c({category:"DELETE",type:"RELATED_RECORD",Entity:a.Entity,
RecordID:a.RecordID,RelatedList:a.RelatedList,RelatedRecordID:a.RelatedRecordID})},attachFile:function(a){var b=a.Entity,c=a.RecordID;a=a.File;a={FileName:a.Name,FileData:a.Content};return e(b,a,c,"ATTACHMENT")}},INTERACTION:{getPageInfo:function(){return c({category:"PAGEINFO"})}},UI:{Dialer:{maximize:function(){return b({action:{telephony:"MAXIMIZE"}})},minimize:function(){return b({action:{telephony:"MINIMIZE"}})},notify:function(){return b({action:{telephony:"NOTIFY"}})},resize:function(a,b){}},
Record:{open:function(a){a={action:{record:"OPEN"},data:{Entity:a.Entity,RecordID:a.RecordID}};return b(a)}}},HTTP:{get:function(a){return g("wget.get",a)},post:function(a){return g("wget.post",a)}},CONNECTOR:{invokeAPI:function(a,b){return g(a,b,"CONNECTOR")}}}}();