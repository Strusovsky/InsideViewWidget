var ZOHO={};
ZOHO.embededApp=function(){function c(b){return b&&"object"===typeof b?!0:!1}var g=void 0,h=/^https?:\/\/[a-zA-Z0-9-_]*.(csez.zohocorpin.com|zoho.com|zohoplatform.com|zohosandbox.com)(:[0-9]{0,4})?$/,f=void 0;this.callBackMap={};this.initPromise=void 0;return{isAllowedOrigin:function(b){return h.test(b)?!0:(console.error("Ignoring Message from:"+b+" with Data:"+event.data),!1)},events:{DialerActive:function(b){console.info("DialerActive:"+JSON.stringify(b))},Dial:function(b){console.info("Dial : "+JSON.stringify(b))},
EntityPageLoad:function(b){console.info("EntityPageLoad : "+JSON.stringify(b))}},customEvents:{},init:function(b){if(c(b)){var e=b.events;if(c(e))for(temp in e)this.events[temp]&&(this.events[temp]=e[temp]);b=b.customEvents;if(c(b))for(temp in b)this.customEvent[temp]=b[temp]}var d,a;b=new Promise(function(b,c){d=b;a=c});this.initPromise={resolve:d,reject:a};return b},request:function(b){var c=Math.random().toString(36).substr(2,16);window.parent.postMessage({"MESSAGE.FROM":"EMBEDDED_APP",WidgetID:g,CallBackID:c,
Data:b},f);var d,a;b=new Promise(function(b,c){d=b;a=c});callBackMap[c]={promise:d,reject:a};return b},handlePostMessage:function(b){b&&("WIDGET.CONFIG"===b.type?(g=b.config.WidgetID,f=b.config.TargetOrigin,this.initPromise.resolve()):this.handleMsg(b))},handleMsg:function(b){var c=b.Event,d=b.wd;"WIDGET.EVENT"===b.type?(b=ZOHO.embededApp.events[c],"function"===typeof b&&b(d)):"WIDGET.CUSTOM_EVENT"===b.type?(b=ZOHO.embededApp.customEvents[c],"function"===typeof b&&b(d)):"WIDGET.CALL_BACK"===b.type&&
(b=callBackMap[b.callBackID].promise,b(d))}}}();window.addEventListener("message",function(c){c&&ZOHO.embededApp.isAllowedOrigin(c.origin||c.originalEvent.origin)&&(c=c.data,"object"===typeof c&&"EMBEDDED_APP"===c["MESSAGE.TO"]&&ZOHO.embededApp.handlePostMessage(c["MESSAGE.CONTENT"]))});ZOHO.CRM=function(){function c(a){return new Promise(function(b,c){ZOHO.embededApp.request(a).then(function(a){b(a)})})}function g(a,b,d,e){a={category:"CREATE",Entity:a,RelatedID:d,APIData:b};a.type=e||"RECORD";return c(a)}function h(a,b,d){return c({category:"READ",APIData:{Entity:a,RecordID:b,RelatedList:d}})}function f(a,b){var d=b.url,e=b.params,f=b.headers,g=b.body;if(!d)throw{Message:"Url missing"};if(e){var h=[],k;for(k in e)h.push(encodeURIComponent(k)+"\x3d"+encodeURIComponent(e[k]));e=
h.join("\x26");d+=(-1<d.indexOf("?")?"\x26":"?")+e}return c({category:"CONNECTOR",nameSpace:a,data:{url:d,Header:f,Body:g}})}function b(a){$.extend(a,{category:"UI"});return c(a)}function e(a,b){return c({category:"CONFIG",type:a,nameSpace:b})}function d(a){var b={category:"USER"};a.ID?b.ID=a.ID:a.Type&&(b.Type=a.Type);return c(b)}return{CONFIG:{getOrgVariable:function(a){return e("VARIABLE",a)},getOrgInfo:function(a){return e("ORG")},getCurrentUser:function(){return e("CURRENT_USER")}},API:{addNotes:function(a){return g(a.Entity,
{data:[{Note_Title:a.Title,Note_Content:a.Content}]},a.RecordID,"NOTES")},insertRecord:function(a){return g(a.Entity,a.APIData)},getRecord:function(a){return h(a.Entity,a.RecordID)},getAllRecords:function(a){return c({category:"READ",APIData:a})},updateRecord:function(a){return c({category:"UPDATE",type:"RECORD",Entity:a.Entity,APIData:a.APIData})},deleteRecord:function(a){return c({category:"DELETE",type:"RECORD",Entity:a.Entity,RecordID:a.RecordID})},searchRecord:function(a){return c({category:"SEARCH",
Entity:a.Entity,Type:a.Type,Query:a.Query})},getAllUsers:function(a){return d({Type:a.Type})},getUser:function(a){return d({ID:a.ID})},getAllUsers:function(a){return d({Type:a.Type})},getRelatedRecords:function(a){return h(a.Entity,a.RecordID,a.RelatedList)},updateRelatedRecords:function(a){return c({category:"UPDATE",type:"RELATED_RECORD",Entity:a.Entity,RecordID:a.RecordID,RelatedList:a.RelatedList,RelatedRecordID:a.RelatedRecordID,APIData:a.APIData})},delinkRelatedRecord:function(a){return c({category:"DELETE",
type:"RELATED_RECORD",Entity:a.Entity,RecordID:a.RecordID,RelatedList:a.RelatedList,RelatedRecordID:a.RelatedRecordID})}},INTERACTION:{getPageInfo:function(){return c({category:"PAGEINFO"})}},UI:{Dialer:{maximize:function(){return b({action:{telephony:"MAXIMIZE"}})},minimize:function(){return b({action:{telephony:"MINIMIZE"}})},notify:function(){return b({action:{telephony:"NOTIFY"}})},resize:function(a,b){}}},HTTP:{get:function(a){return f("wget.post",a)},post:function(a){return f("wget.post",a)}},
CONNECTOR:{invokeAPI:function(a,b){return f(a,b)}}}}();